import React, { useContext } from "react";
import { Link, useHistory } from "react-router-dom";
import { UserContext } from "../App";

function Navbar() {
  const { state, dispatch } = useContext(UserContext);
  const history = useHistory();

  const logoutHandler = () => {
    localStorage.clear();
    dispatch({ type: "CLEAR" });
    history.push("/signin");
  };

  const renderList = () => {
    if (state) {
      return [
        <li className="nav-item" key="-1">
          <Link className="nav-link" to="/">
            <svg
              width="40"
              height="46"
              viewBox="0 0 40 46"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13 44H2.876C2.392 44 2 43.716 2 43.259V18"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinejoin="round"
              />
              <path
                d="M38 19V43.259C38 43.716 37.608 44 37.124 44H26"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinejoin="round"
              />
              <path
                d="M38 18.8867L20 2.0007L2 18.4297"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M14 46V31H26V46"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinejoin="round"
              />
            </svg>
          </Link>
        </li>,
        <li className="nav-item" key="1">
          <Link className="nav-link" to="/explore">
            <svg
              className="explore"
              width="50"
              height="50"
              viewBox="0 0 50 50"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M25 4.16669C13.5 4.16669 4.16663 13.5 4.16663 25C4.16663 36.5 13.5 45.8334 25 45.8334C36.5 45.8334 45.8333 36.5 45.8333 25C45.8333 13.5 36.5 4.16669 25 4.16669ZM8.33331 25C8.33331 23.7292 8.49997 22.4792 8.77081 21.2917L18.7291 31.25V33.3333C18.7291 35.625 20.6041 37.5 22.8958 37.5V41.5208C14.7083 40.4792 8.33331 33.4792 8.33331 25ZM33.3125 33.3334C35.1875 33.3334 36.7291 34.5625 37.2708 36.25C39.9791 33.2917 41.6666 29.3334 41.6666 25C41.6666 18.0209 37.3333 12.0209 31.2291 9.56254V10.4167C31.2291 12.7084 29.3541 14.5834 27.0625 14.5834H22.8958V18.75C22.8958 19.8959 21.9583 20.8334 20.8125 20.8334H16.6458V25H29.1458C30.2916 25 31.2291 25.9375 31.2291 27.0834V33.3334H33.3125Z"
                fill="#43484D"
              />
            </svg>
          </Link>
        </li>,
        <li className="nav-item dropdown" key="2">
          <p
            className="nav-link dropdown-toggle"
            to="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <svg
              width="45"
              height="46"
              viewBox="0 0 45 46"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M42.2501 36C42.2501 29.373 33.2961 24 22.2501 24C11.2041 24 2.25012 29.373 2.25012 36"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinecap="round"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M22.2501 24.0087C28.3251 24.0087 33.2501 19.0837 33.2501 13.0087C33.2501 6.93373 28.3251 2.00873 22.2501 2.00873C16.1751 2.00873 11.2501 6.93373 11.2501 13.0087C11.2501 19.0837 16.1751 24.0087 22.2501 24.0087V24.0087Z"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinecap="round"
              />
              <path
                d="M42 36V42.565C42 43.151 41.801 44 41.221 44H3.279C2.711 44 2 43.144 2 42.565V36"
                stroke="#43484D"
                strokeWidth="4"
                strokeLinecap="round"
              />
            </svg>
          </p>
          <div
            className="dropdown-menu"
            aria-labelledby="navbarDropdownMenuLink"
          >
            <Link className="dropdown-item nav-link" to="/profile">
              Profile
            </Link>
            <Link className="dropdown-item nav-link" to="/settings">
              Settings
            </Link>
            <p className="dropdown-item nav-link" onClick={logoutHandler}>
              Logout
            </p>
          </div>
        </li>,
      ];
    } else {
      return [
        <li className="nav-item nav-login" key="1">
          <Link className="nav-link" to="/signin">
            Login
          </Link>
        </li>,
        <li className="nav-item nav-signup" key="2">
          <Link to="/signup">Sign Up</Link>
        </li>,
      ];
    }
  };

  return (
    <nav className="navbar sticky-top navbar-expand-lg">
      <Link className="navbar-brand" to={state ? "/" : "/welcome"}>
        <svg
          width="73"
          height="26"
          viewBox="0 0 73 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.872 11.776C4.872 11.1787 4.928 10.6093 5.04 10.068C5.17067 9.508 5.376 9.01333 5.656 8.584C5.936 8.136 6.3 7.78133 6.748 7.52C7.196 7.25867 7.74667 7.128 8.4 7.128C9.016 7.128 9.53867 7.268 9.968 7.548C10.416 7.828 10.7707 8.192 11.032 8.64C11.2933 9.088 11.48 9.592 11.592 10.152C11.7227 10.712 11.788 11.272 11.788 11.832C11.788 12.4293 11.7227 13.008 11.592 13.568C11.48 14.1093 11.284 14.5947 11.004 15.024C10.7427 15.4347 10.388 15.7707 9.94 16.032C9.51067 16.2747 8.96933 16.396 8.316 16.396C7.66267 16.396 7.112 16.2653 6.664 16.004C6.23467 15.7427 5.88 15.3973 5.6 14.968C5.33867 14.52 5.152 14.0253 5.04 13.484C4.928 12.924 4.872 12.3547 4.872 11.776ZM15.624 24.068V4.524H11.844V6.372H11.788C11.34 5.56933 10.7147 5 9.912 4.664C9.128 4.30933 8.288 4.132 7.392 4.132C6.29067 4.132 5.32933 4.34667 4.508 4.776C3.70533 5.20533 3.03333 5.784 2.492 6.512C1.95067 7.22133 1.54933 8.04267 1.288 8.976C1.02667 9.90933 0.896 10.8707 0.896 11.86C0.896 13.26 1.092 14.4453 1.484 15.416C1.876 16.368 2.37067 17.1427 2.968 17.74C3.56533 18.3187 4.21867 18.7387 4.928 19C5.656 19.2427 6.356 19.364 7.028 19.364C7.924 19.364 8.792 19.196 9.632 18.86C10.472 18.524 11.1253 17.964 11.592 17.18H11.648V24.068H15.624ZM32.2092 19V4.524H28.2332V12.112C28.2332 13.5867 27.9905 14.6507 27.5052 15.304C27.0199 15.9387 26.2359 16.256 25.1532 16.256C24.2012 16.256 23.5385 15.9667 23.1652 15.388C22.7919 14.7907 22.6052 13.8947 22.6052 12.7V4.524H18.6292V13.428C18.6292 14.324 18.7039 15.1453 18.8532 15.892C19.0212 16.62 19.3012 17.2453 19.6932 17.768C20.0852 18.272 20.6172 18.664 21.2892 18.944C21.9799 19.224 22.8572 19.364 23.9212 19.364C24.7612 19.364 25.5825 19.1773 26.3852 18.804C27.1879 18.4307 27.8412 17.824 28.3452 16.984H28.4292V19H32.2092Z"
            fill="black"
          />
          <path
            d="M38.292 13.312V9H36.276C36.2573 8.70133 36.2947 8.412 36.388 8.132C36.4813 7.83333 36.6213 7.572 36.808 7.348C36.9947 7.10533 37.2187 6.9 37.48 6.732C37.7227 6.564 37.984 6.452 38.264 6.396V4.38C37.6667 4.47333 37.1067 4.65067 36.584 4.912C36.0427 5.15467 35.576 5.472 35.184 5.864C34.792 6.256 34.484 6.72267 34.26 7.264C34.0173 7.78667 33.896 8.36533 33.896 9V13.312H38.292Z"
            fill="black"
          />
          <path
            d="M41.708 9.688V14H43.724C43.7427 14.2987 43.7053 14.588 43.612 14.868C43.5187 15.1667 43.3787 15.428 43.192 15.652C43.0053 15.8947 42.7813 16.1 42.52 16.268C42.2773 16.436 42.016 16.548 41.736 16.604V18.62C42.3333 18.5267 42.8933 18.3493 43.416 18.088C43.9573 17.8453 44.424 17.528 44.816 17.136C45.208 16.744 45.516 16.2773 45.74 15.736C45.9827 15.2133 46.104 14.6347 46.104 14V9.688H41.708Z"
            fill="black"
          />
          <path
            d="M53.552 4.524V0.183999H49.576V4.524H47.168V7.184H49.576V15.724C49.576 16.452 49.6973 17.04 49.94 17.488C50.1827 17.936 50.5093 18.2813 50.92 18.524C51.3493 18.7667 51.8347 18.9253 52.376 19C52.936 19.0933 53.524 19.14 54.14 19.14C54.532 19.14 54.9333 19.1307 55.344 19.112C55.7547 19.0933 56.128 19.056 56.464 19V15.92C56.2773 15.9573 56.0813 15.9853 55.876 16.004C55.6707 16.0227 55.456 16.032 55.232 16.032C54.56 16.032 54.112 15.92 53.888 15.696C53.664 15.472 53.552 15.024 53.552 14.352V7.184H56.464V4.524H53.552ZM68.0998 10.208H61.6318C61.6504 9.928 61.7064 9.61067 61.7998 9.256C61.9118 8.90133 62.0891 8.56533 62.3318 8.248C62.5931 7.93067 62.9291 7.66933 63.3398 7.464C63.7691 7.24 64.3011 7.128 64.9358 7.128C65.9064 7.128 66.6251 7.38933 67.0918 7.912C67.5771 8.43467 67.9131 9.2 68.0998 10.208ZM61.6318 12.728H72.0758C72.1504 11.608 72.0571 10.5347 71.7958 9.508C71.5344 8.48133 71.1051 7.56667 70.5078 6.764C69.9291 5.96133 69.1824 5.32667 68.2678 4.86C67.3531 4.37467 66.2798 4.132 65.0478 4.132C63.9464 4.132 62.9384 4.328 62.0238 4.72C61.1278 5.112 60.3531 5.65333 59.6998 6.344C59.0464 7.016 58.5424 7.81867 58.1878 8.752C57.8331 9.68533 57.6558 10.6933 57.6558 11.776C57.6558 12.896 57.8238 13.9227 58.1598 14.856C58.5144 15.7893 59.0091 16.592 59.6438 17.264C60.2784 17.936 61.0531 18.4587 61.9678 18.832C62.8824 19.1867 63.9091 19.364 65.0478 19.364C66.6904 19.364 68.0904 18.9907 69.2478 18.244C70.4051 17.4973 71.2638 16.256 71.8238 14.52H68.3238C68.1931 14.968 67.8384 15.3973 67.2598 15.808C66.6811 16.2 65.9904 16.396 65.1878 16.396C64.0678 16.396 63.2091 16.1067 62.6118 15.528C62.0144 14.9493 61.6878 14.016 61.6318 12.728Z"
            fill="black"
          />
        </svg>
      </Link>

      <ul className="navbar-nav ml-auto ul-wrapper">{renderList()}</ul>
    </nav>
  );
}

export default Navbar;
